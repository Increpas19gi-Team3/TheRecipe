<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="review_ns">

	<resultMap id="ReviewResult" type="Review">
		<result property="r_rvcode" column="r_rvcode" /><!-- 후기코드 -->
		<result property="m_userid" column="m_userid" /><!-- 아이디 -->
		<result property="f_fdcode" column="f_fdcode" /><!-- 상품코드 -->
		<result property="r_title" column="r_title" /><!-- 제목 -->
		<result property="r_rvcontents" column="r_rvcontents" /><!-- 추기(내용) -->
		<result property="r_grade" column="r_grade" /><!-- 평점() -->
		<result property="r_rvimgname" column="r_rvimgname" /><!-- 이미지 -->
		<result property="r_rvcount" column="r_rvcount" /><!-- 조회수 -->
		<result property="r_rvdate" column="r_rvdate" /><!-- 글등록시간 -->
		<result property="r_admincmt" column="r_admincmt" /><!-- 관리자댓글 -->
		<result property="r_admindate" column="r_admindate" /><!-- 관리자댓글시간 -->
	</resultMap>
	
	<!-- 전체 후기 리스트 글 갯수 리턴 -->
	<select id="selectReviewCount" parameterType="com.increpas.therecipe.dto.EventListDTO"
		resultType="int">
		SELECT COUNT(*)
		FROM TR_REVIEW
		<where>
			e_gubun = '0'

			<if test="whereColumn.equals('ALL')">
				and (E_NTTILTE LIKE '%' || #{word } || '%' or E_NTCONTENS LIKE '%' || #{word } || '%')
			</if>
			
			<if test="whereColumn.equals('TITLE')">
				AND e_nttilte LIKE '%' || #{word } || '%'
			</if>
		</where>
	</select>
	
				
	
</mapper>